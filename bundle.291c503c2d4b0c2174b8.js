"use strict";(self.webpackChunkspotipack=self.webpackChunkspotipack||[]).push([[847],{653:(t,e,n)=>{n.d(e,{A:()=>o});class s extends HTMLButtonElement{constructor(t,e,n,s){super(),this.id=t,this.textContent=e,this.classList.add(...n),this.addEventListener("click",s)}}customElements.define("custom-button",s,{extends:"button"});const o=s},847:(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});var s=n(520);class o extends s.A{constructor(t,e){super(t,e);let n=this.authManager.isAuthentified()?"Accéder à votre compte":"Se connecter à Spotify";this.connectToSpotify=document.createElement("button"),this.connectToSpotify.className="spotify-btn",this.connectToSpotify.textContent=n,this.connectToSpotify.addEventListener("click",(()=>this.handleButtonClick())),this.particles=document.createElement("div"),this.particles.className="particles",this.createParticles(200)}async render(){super.render();const t=document.createElement("div");t.className="home-page";const e=document.createElement("div");e.className="home-page-content";const n=document.createElement("h1");n.className="home-page-title",n.textContent="Découvrez  ce que vous écoutez réellement",e.appendChild(n),e.appendChild(this.connectToSpotify),t.appendChild(this.particles),t.appendChild(e),this.container.appendChild(t)}handleButtonClick(){try{this.authManager.restoreTokens()}catch(t){console.error(t)}this.authManager.isAuthentified()?window.router.navigateTo("me"):this.handleSpotifyAuth()}handleSpotifyAuth(){this.authManager.isAuthentified()||this.authManager.authenticate()}createParticles(t){for(let e=0;e<t;e++){const t=document.createElement("div");t.classList.add("particle"),t.style.left=100*Math.random()+"%",t.style.top=100*Math.random()+"%",t.style.animationDelay=4*Math.random()+"s",this.particles.appendChild(t)}}}},520:(t,e,n)=>{n.d(e,{A:()=>a});var s=n(653),o=n(958);class a{constructor(t,e){if(this.authManager=t,this.spotify=e,this.topBar=document.getElementById("top-bar"),this.setupTopBar(),this.container=document.getElementById("app-container"),!this.container)throw new Error("L'élément app-container est introuvable dans le DOM");this.footer=document.getElementById("footer"),this.setupFooter()}async render(){const t=new URLSearchParams(window.location.search);t.has("error")&&this.showErrorMessage(t.get("error")),this.authManager.isAuthentified()&&"#home"!=window.location.hash&&"#callback"!=window.location.hash&&await this.spotify.getLoggedUserInfos().then((()=>{let t=this.topBar.children[1];t.style.display="flex",t.children[0].children[0].setAttribute("src",this.spotify.loggedUser?this.spotify.loggedUser.pictureURL.toString():""),t.children[0].children[1].textContent=this.spotify.loggedUser?this.spotify.loggedUser.name:"Unknown"}))}showErrorMessage(t){console.error("error",t);const e=document.createElement("div");e.classList.add("error-popup");const n=document.createElement("span");n.textContent="Nous avons rencontré un problème : "+t,e.style.display="flex",e.appendChild(n);const o=new s.A("error-close-button","Fermer",["error-close-button"],(()=>{e.style.display="none"}));o.classList.add("error-close-button"),e.appendChild(o),this.container.appendChild(e)}async setupTopBar(){if(0==this.topBar.children.length)this.createTopbar();else if(!this.authManager.isAuthentified()){this.topBar.children[1].style.display="none"}if(this.authManager.isAuthentified()){this.topBar.children[1].style.display="flex"}}createTopbar(){this.topBar.classList.add("top-bar");const t=document.createElement("img");t.src=o,t.alt="Spotify Icon",t.classList.add("spotify-icon");const e=document.createElement("span");e.textContent="Spotipack",e.classList.add("app-name");const n=document.createElement("div");n.classList.add("left-container"),n.appendChild(t),n.appendChild(e);const a=document.createElement("img");a.src=this.spotify.loggedUser?this.spotify.loggedUser.pictureURL.toString():"https://placekitten.com/200/200",a.alt="User Icon",a.classList.add("user-icon");const i=document.createElement("span");i.textContent=this.spotify.loggedUser?this.spotify.loggedUser.name:"Unknown",i.classList.add("user-name");const r=document.createElement("div");r.classList.add("right-container");const c=document.createElement("div");c.classList.add("user-profile");const d=new s.A("logout-button","Déconnecter",["logout-button"],(()=>{this.authManager.logout(),this.setupTopBar()}));c.appendChild(a),c.appendChild(i),c.onclick=()=>{window.router.navigateTo("me")},c.classList.add("flex-center","user-profile"),r.appendChild(c),r.appendChild(d),r.style.display="none",this.topBar.appendChild(n),this.topBar.appendChild(r)}setupFooter(){if(this.footer.children.length>0)return;this.footer.classList.add("footer","flex-center");const t=document.createElement("span");t.textContent="© 2024 Spotipack";const e=document.createElement("div");e.classList.add("flex-center","footer-text2","link-flash");const n=document.createElement("span");n.textContent="Made with   ❤️   by";const s=document.createElement("a");s.textContent="Kinan",s.href="https://github.com/KinanLak/",s.target="_blank",this.footer.appendChild(t),e.appendChild(n),e.appendChild(s),this.footer.appendChild(e)}}},958:(t,e,n)=>{t.exports=n.p+"75e30939df0b93a86b36.png"}}]);
//# sourceMappingURL=bundle.291c503c2d4b0c2174b8.js.map