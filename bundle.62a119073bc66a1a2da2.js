"use strict";(self.webpackChunkspotipack=self.webpackChunkspotipack||[]).push([[194],{653:(t,e,s)=>{s.d(e,{A:()=>i});class n extends HTMLButtonElement{constructor(t,e,s,n){super(),this.id=t,this.textContent=e,this.classList.add(...s),this.addEventListener("click",n)}}customElements.define("custom-button",n,{extends:"button"});const i=n},928:(t,e,s)=>{s.d(e,{h:()=>n,Z:()=>i});class n extends HTMLDivElement{constructor(t){super(),this.artist=t,this.classList.add("artist-pill"),this.innerHTML=`\n        <img src="${t.pictureURL}" alt="Artist Image" class="artist-image">\n        <div id="artist-${t.id}" class="artist-name">${t.name}</div>\n        `,this.addEventListener("click",(()=>{console.error("Navigating to artist",t.id),window.router.navigateTo("artist",{id:t.id})}))}}customElements.define("artist-pill",n,{extends:"div"});class i extends HTMLDivElement{constructor(t){super(),this.track=t,this.classList.add("track-pill"),this.innerHTML=`\n        <img src="${t.imageURL}" alt="Track Image" class="track-image">\n        <div id="track-${t.id}" class="track-name">${t.name}</div>\n        `,this.addEventListener("click",(()=>{console.error("Navigating to track",t.id),window.router.navigateTo("track",{id:t.id})}))}}customElements.define("track-pill",i,{extends:"div"});s(653)},194:(t,e,s)=>{s.r(e),s.d(e,{default:()=>a});var n=s(520),i=s(928);class a extends n.A{constructor(t,e){super(t,e)}async render(){await super.render(),this.renderContent()}async renderContent(){document.title="Me - Spotify Stats";let t=document.createElement("span");t.classList.add("artist-title"),t.textContent="Vos artistes préférés",this.container.appendChild(t);let e=document.createElement("div");e.id="user-artists",e.classList.add("user-artists"),this.spotify.loggedUser?.topArtists.forEach((t=>{if(e){const s=new i.h(t);e.appendChild(s)}})),this.container.appendChild(e);let s=document.createElement("span");s.classList.add("track-title"),s.textContent="Vos titres préférés",this.container.appendChild(s);let n=document.createElement("div");n.id="user-tracks",n.classList.add("user-tracks"),this.spotify.loggedUser?.topTracks.forEach((t=>{if(n){const e=new i.Z(t);n.appendChild(e)}})),this.container.appendChild(n)}}},520:(t,e,s)=>{s.d(e,{A:()=>a});var n=s(653),i=s(958);class a{constructor(t,e){if(this.authManager=t,this.spotify=e,this.topBar=document.getElementById("top-bar"),this.setupTopBar(),this.container=document.getElementById("app-container"),!this.container)throw new Error("L'élément app-container est introuvable dans le DOM");this.footer=document.getElementById("footer"),this.setupFooter()}async render(){const t=new URLSearchParams(window.location.search);t.has("error")&&this.showErrorMessage(t.get("error")),this.authManager.isAuthentified()&&"#home"!=window.location.hash&&"#callback"!=window.location.hash&&await this.spotify.getLoggedUserInfos().then((()=>{let t=this.topBar.children[1];t.style.display="flex",t.children[0].children[0].setAttribute("src",this.spotify.loggedUser?this.spotify.loggedUser.pictureURL.toString():""),t.children[0].children[1].textContent=this.spotify.loggedUser?this.spotify.loggedUser.name:"Unknown"}))}showErrorMessage(t){console.error("error",t);const e=document.createElement("div");e.classList.add("error-popup");const s=document.createElement("span");s.textContent="Nous avons rencontré un problème : "+t,e.style.display="flex",e.appendChild(s);const i=new n.A("error-close-button","Fermer",["error-close-button"],(()=>{e.style.display="none"}));i.classList.add("error-close-button"),e.appendChild(i),this.container.appendChild(e)}async setupTopBar(){if(0==this.topBar.children.length)this.createTopbar();else if(!this.authManager.isAuthentified()){this.topBar.children[1].style.display="none"}if(this.authManager.isAuthentified()){this.topBar.children[1].style.display="flex"}}createTopbar(){this.topBar.classList.add("top-bar");const t=document.createElement("img");t.src=i,t.alt="Spotify Icon",t.classList.add("spotify-icon");const e=document.createElement("span");e.textContent="Spotipack",e.classList.add("app-name");const s=document.createElement("div");s.classList.add("left-container"),s.appendChild(t),s.appendChild(e);const a=document.createElement("img");a.src=this.spotify.loggedUser?this.spotify.loggedUser.pictureURL.toString():"https://placekitten.com/200/200",a.alt="User Icon",a.classList.add("user-icon");const r=document.createElement("span");r.textContent=this.spotify.loggedUser?this.spotify.loggedUser.name:"Unknown",r.classList.add("user-name");const o=document.createElement("div");o.classList.add("right-container");const d=document.createElement("div");d.classList.add("user-profile");const c=new n.A("logout-button","Déconnecter",["logout-button"],(()=>{this.authManager.logout(),this.setupTopBar()}));d.appendChild(a),d.appendChild(r),d.onclick=()=>{window.router.navigateTo("me")},d.classList.add("flex-center","user-profile"),o.appendChild(d),o.appendChild(c),o.style.display="none",this.topBar.appendChild(s),this.topBar.appendChild(o)}setupFooter(){if(this.footer.children.length>0)return;this.footer.classList.add("footer","flex-center");const t=document.createElement("span");t.textContent="© 2024 Spotipack";const e=document.createElement("div");e.classList.add("flex-center","footer-text2","link-flash");const s=document.createElement("span");s.textContent="Made with   ❤️   by";const n=document.createElement("a");n.textContent="Kinan",n.href="https://github.com/KinanLak/",n.target="_blank",this.footer.appendChild(t),e.appendChild(s),e.appendChild(n),this.footer.appendChild(e)}}},958:(t,e,s)=>{t.exports=s.p+"75e30939df0b93a86b36.png"}}]);
//# sourceMappingURL=bundle.62a119073bc66a1a2da2.js.map