{"version":3,"file":"bundle.e22e7fa722bcce589ab8.js","mappings":"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","sources":["webpack:///./src/ts/components/Button.ts","webpack:///./src/ts/pages/CallbackPage.ts","webpack:///./src/ts/pages/Page.ts"],"sourcesContent":["class Button extends HTMLButtonElement {\n    constructor(id, text, classes, action) {\n        super();\n        this.id = id;\n        this.textContent = text;\n        this.classList.add(...classes);\n        this.addEventListener('click', action);\n    }\n}\ncustomElements.define('custom-button', Button, { extends: 'button' });\nexport default Button;\n","import Page from \"./Page\";\nexport default class CallbackPage extends Page {\n    constructor(authManager, spotify) {\n        super(authManager, spotify);\n    }\n    async render() {\n        super.render();\n        let callbackDiv = document.createElement(\"h1\");\n        callbackDiv.classList.add(\"callback-page\");\n        callbackDiv.textContent = \"Redirection...\";\n        this.container.appendChild(callbackDiv);\n        await this.authManager.handleSpotifyCallback();\n        await this.spotify.getLoggedUserInfos();\n    }\n}\n","import Button from \"../components/Button\";\nimport \"../../css/components/topbar.scss\";\nimport \"../../css/components/footer.scss\";\nimport spotifyIcon from \"../../images/spotify-icon.png\";\nexport default class Page {\n    constructor(authManager, spotify) {\n        this.authManager = authManager;\n        this.spotify = spotify;\n        this.topBar = document.getElementById(\"top-bar\");\n        this.setupTopBar();\n        this.container = document.getElementById(\"app-container\");\n        if (!this.container) {\n            throw new Error(\"L'élément app-container est introuvable dans le DOM\");\n        }\n        this.footer = document.getElementById(\"footer\");\n        this.setupFooter();\n    }\n    async render() {\n        //s'il y a un paramètre error\n        const urlParams = new URLSearchParams(window.location.search);\n        urlParams.has(\"error\") && this.showErrorMessage(urlParams.get(\"error\"));\n        if (this.authManager.isAuthentified() &&\n            window.location.hash != \"#home\" &&\n            window.location.hash != \"#callback\") {\n            await this.spotify.getLoggedUserInfos().then(() => {\n                let rightContainer = this.topBar.children[1];\n                rightContainer.style.display = \"flex\";\n                rightContainer.children[0].children[0].setAttribute(\"src\", this.spotify.loggedUser ? this.spotify.loggedUser.pictureURL.toString() : \"\");\n                rightContainer.children[0].children[1].textContent = this.spotify.loggedUser\n                    ? this.spotify.loggedUser.name\n                    : \"Unknown\";\n            });\n        }\n    }\n    showErrorMessage(error) {\n        console.error(\"error\", error);\n        const errorPopup = document.createElement(\"div\");\n        errorPopup.classList.add(\"error-popup\");\n        const errorMessage = document.createElement(\"span\");\n        errorMessage.textContent = \"Nous avons rencontré un problème : \" + error;\n        errorPopup.style.display = \"flex\";\n        errorPopup.appendChild(errorMessage);\n        const errorCloseButton = new Button(\"error-close-button\", \"Fermer\", [\"error-close-button\"], () => {\n            errorPopup.style.display = \"none\";\n        });\n        errorCloseButton.classList.add(\"error-close-button\");\n        errorPopup.appendChild(errorCloseButton);\n        this.container.appendChild(errorPopup);\n    }\n    async setupTopBar() {\n        if (this.topBar.children.length == 0) {\n            this.createTopbar();\n        }\n        else if (!this.authManager.isAuthentified()) {\n            let rightContainer = this.topBar.children[1];\n            rightContainer.style.display = \"none\";\n        }\n        if (this.authManager.isAuthentified()) {\n            let rightContainer = this.topBar.children[1];\n            rightContainer.style.display = \"flex\";\n        }\n    }\n    createTopbar() {\n        this.topBar.classList.add(\"top-bar\");\n        const spotifyIconElement = document.createElement(\"img\");\n        spotifyIconElement.src = spotifyIcon;\n        spotifyIconElement.alt = \"Spotify Icon\";\n        spotifyIconElement.classList.add(\"spotify-icon\");\n        const appName = document.createElement(\"span\");\n        appName.textContent = \"Spotipack\";\n        appName.classList.add(\"app-name\");\n        const leftContainer = document.createElement(\"div\");\n        leftContainer.classList.add(\"left-container\");\n        leftContainer.appendChild(spotifyIconElement);\n        leftContainer.appendChild(appName);\n        const userIcon = document.createElement(\"img\");\n        userIcon.src = this.spotify.loggedUser\n            ? this.spotify.loggedUser.pictureURL.toString()\n            : \"https://placekitten.com/200/200\";\n        userIcon.alt = \"User Icon\";\n        userIcon.classList.add(\"user-icon\");\n        const userName = document.createElement(\"span\");\n        userName.textContent = this.spotify.loggedUser ? this.spotify.loggedUser.name : \"Unknown\";\n        userName.classList.add(\"user-name\");\n        const rightContainer = document.createElement(\"div\");\n        rightContainer.classList.add(\"right-container\");\n        const userProfile = document.createElement(\"div\");\n        userProfile.classList.add(\"user-profile\");\n        const logoutButton = new Button(\"logout-button\", \"Déconnecter\", [\"logout-button\"], () => {\n            this.authManager.logout();\n            this.setupTopBar();\n        });\n        userProfile.appendChild(userIcon);\n        userProfile.appendChild(userName);\n        userProfile.onclick = () => {\n            window.router.navigateTo(\"me\");\n        };\n        userProfile.classList.add(\"flex-center\", \"user-profile\");\n        rightContainer.appendChild(userProfile);\n        rightContainer.appendChild(logoutButton);\n        rightContainer.style.display = \"none\";\n        this.topBar.appendChild(leftContainer);\n        this.topBar.appendChild(rightContainer);\n    }\n    setupFooter() {\n        if (this.footer.children.length > 0) {\n            return;\n        }\n        this.footer.classList.add(\"footer\", \"flex-center\");\n        const footerText1 = document.createElement(\"span\");\n        footerText1.textContent = \"© 2024 Spotipack\";\n        const footerText2Div = document.createElement(\"div\");\n        footerText2Div.classList.add(\"flex-center\", \"footer-text2\", \"link-flash\");\n        const footerText2 = document.createElement(\"span\");\n        footerText2.textContent = \"Made with   ❤️   by\";\n        const footerLink = document.createElement(\"a\");\n        footerLink.textContent = \"Kinan\";\n        footerLink.href = \"https://github.com/KinanLak/\";\n        footerLink.target = \"_blank\";\n        this.footer.appendChild(footerText1);\n        footerText2Div.appendChild(footerText2);\n        footerText2Div.appendChild(footerLink);\n        this.footer.appendChild(footerText2Div);\n    }\n}\n"],"names":["Button","HTMLButtonElement","constructor","id","text","classes","action","super","this","textContent","classList","add","addEventListener","customElements","define","extends","CallbackPage","authManager","spotify","render","callbackDiv","document","createElement","container","appendChild","handleSpotifyCallback","getLoggedUserInfos","Page","topBar","getElementById","setupTopBar","Error","footer","setupFooter","urlParams","URLSearchParams","window","location","search","has","showErrorMessage","get","isAuthentified","hash","then","rightContainer","children","style","display","setAttribute","loggedUser","pictureURL","toString","name","error","console","errorPopup","errorMessage","errorCloseButton","length","createTopbar","spotifyIconElement","src","alt","appName","leftContainer","userIcon","userName","userProfile","logoutButton","logout","onclick","router","navigateTo","footerText1","footerText2Div","footerText2","footerLink","href","target"],"sourceRoot":""}