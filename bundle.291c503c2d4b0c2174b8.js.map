{"version":3,"file":"bundle.291c503c2d4b0c2174b8.js","mappings":"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","sources":["webpack:///./src/ts/components/Button.ts","webpack:///./src/ts/pages/HomePage.ts","webpack:///./src/ts/pages/Page.ts"],"sourcesContent":["class Button extends HTMLButtonElement {\n    constructor(id, text, classes, action) {\n        super();\n        this.id = id;\n        this.textContent = text;\n        this.classList.add(...classes);\n        this.addEventListener('click', action);\n    }\n}\ncustomElements.define('custom-button', Button, { extends: 'button' });\nexport default Button;\n","import Page from \"./Page\";\nimport \"../../css/components/spotifyButton.scss\";\nimport \"../../css/pages/home.scss\";\nexport default class HomePage extends Page {\n    constructor(authManager, spotify) {\n        super(authManager, spotify);\n        let buttonString = this.authManager.isAuthentified()\n            ? \"Accéder à votre compte\"\n            : \"Se connecter à Spotify\";\n        this.connectToSpotify = document.createElement(\"button\");\n        this.connectToSpotify.className = \"spotify-btn\";\n        this.connectToSpotify.textContent = buttonString;\n        this.connectToSpotify.addEventListener(\"click\", () => this.handleButtonClick());\n        this.particles = document.createElement(\"div\");\n        this.particles.className = \"particles\";\n        this.createParticles(200);\n    }\n    async render() {\n        super.render();\n        const homePage = document.createElement(\"div\");\n        homePage.className = \"home-page\";\n        const content = document.createElement(\"div\");\n        content.className = \"home-page-content\";\n        const title = document.createElement(\"h1\");\n        title.className = \"home-page-title\";\n        title.textContent = \"Découvrez  ce que vous écoutez réellement\";\n        content.appendChild(title);\n        content.appendChild(this.connectToSpotify);\n        homePage.appendChild(this.particles);\n        homePage.appendChild(content);\n        this.container.appendChild(homePage);\n    }\n    handleButtonClick() {\n        try {\n            this.authManager.restoreTokens();\n        }\n        catch (error) {\n            console.error(error);\n        }\n        if (this.authManager.isAuthentified()) {\n            window.router.navigateTo(\"me\");\n        }\n        else {\n            this.handleSpotifyAuth();\n        }\n    }\n    handleSpotifyAuth() {\n        if (!this.authManager.isAuthentified()) {\n            this.authManager.authenticate();\n        }\n    }\n    createParticles(num) {\n        for (let i = 0; i < num; i++) {\n            const particle = document.createElement(\"div\");\n            particle.classList.add(\"particle\");\n            particle.style.left = `${Math.random() * 100}%`;\n            particle.style.top = `${Math.random() * 100}%`;\n            particle.style.animationDelay = `${Math.random() * 4}s`;\n            this.particles.appendChild(particle);\n        }\n    }\n}\n","import Button from \"../components/Button\";\nimport \"../../css/components/topbar.scss\";\nimport \"../../css/components/footer.scss\";\nimport spotifyIcon from \"../../images/spotify-icon.png\";\nexport default class Page {\n    constructor(authManager, spotify) {\n        this.authManager = authManager;\n        this.spotify = spotify;\n        this.topBar = document.getElementById(\"top-bar\");\n        this.setupTopBar();\n        this.container = document.getElementById(\"app-container\");\n        if (!this.container) {\n            throw new Error(\"L'élément app-container est introuvable dans le DOM\");\n        }\n        this.footer = document.getElementById(\"footer\");\n        this.setupFooter();\n    }\n    async render() {\n        //s'il y a un paramètre error\n        const urlParams = new URLSearchParams(window.location.search);\n        urlParams.has(\"error\") && this.showErrorMessage(urlParams.get(\"error\"));\n        if (this.authManager.isAuthentified() &&\n            window.location.hash != \"#home\" &&\n            window.location.hash != \"#callback\") {\n            await this.spotify.getLoggedUserInfos().then(() => {\n                let rightContainer = this.topBar.children[1];\n                rightContainer.style.display = \"flex\";\n                rightContainer.children[0].children[0].setAttribute(\"src\", this.spotify.loggedUser ? this.spotify.loggedUser.pictureURL.toString() : \"\");\n                rightContainer.children[0].children[1].textContent = this.spotify.loggedUser\n                    ? this.spotify.loggedUser.name\n                    : \"Unknown\";\n            });\n        }\n    }\n    showErrorMessage(error) {\n        console.error(\"error\", error);\n        const errorPopup = document.createElement(\"div\");\n        errorPopup.classList.add(\"error-popup\");\n        const errorMessage = document.createElement(\"span\");\n        errorMessage.textContent = \"Nous avons rencontré un problème : \" + error;\n        errorPopup.style.display = \"flex\";\n        errorPopup.appendChild(errorMessage);\n        const errorCloseButton = new Button(\"error-close-button\", \"Fermer\", [\"error-close-button\"], () => {\n            errorPopup.style.display = \"none\";\n        });\n        errorCloseButton.classList.add(\"error-close-button\");\n        errorPopup.appendChild(errorCloseButton);\n        this.container.appendChild(errorPopup);\n    }\n    async setupTopBar() {\n        if (this.topBar.children.length == 0) {\n            this.createTopbar();\n        }\n        else if (!this.authManager.isAuthentified()) {\n            let rightContainer = this.topBar.children[1];\n            rightContainer.style.display = \"none\";\n        }\n        if (this.authManager.isAuthentified()) {\n            let rightContainer = this.topBar.children[1];\n            rightContainer.style.display = \"flex\";\n        }\n    }\n    createTopbar() {\n        this.topBar.classList.add(\"top-bar\");\n        const spotifyIconElement = document.createElement(\"img\");\n        spotifyIconElement.src = spotifyIcon;\n        spotifyIconElement.alt = \"Spotify Icon\";\n        spotifyIconElement.classList.add(\"spotify-icon\");\n        const appName = document.createElement(\"span\");\n        appName.textContent = \"Spotipack\";\n        appName.classList.add(\"app-name\");\n        const leftContainer = document.createElement(\"div\");\n        leftContainer.classList.add(\"left-container\");\n        leftContainer.appendChild(spotifyIconElement);\n        leftContainer.appendChild(appName);\n        const userIcon = document.createElement(\"img\");\n        userIcon.src = this.spotify.loggedUser\n            ? this.spotify.loggedUser.pictureURL.toString()\n            : \"https://placekitten.com/200/200\";\n        userIcon.alt = \"User Icon\";\n        userIcon.classList.add(\"user-icon\");\n        const userName = document.createElement(\"span\");\n        userName.textContent = this.spotify.loggedUser ? this.spotify.loggedUser.name : \"Unknown\";\n        userName.classList.add(\"user-name\");\n        const rightContainer = document.createElement(\"div\");\n        rightContainer.classList.add(\"right-container\");\n        const userProfile = document.createElement(\"div\");\n        userProfile.classList.add(\"user-profile\");\n        const logoutButton = new Button(\"logout-button\", \"Déconnecter\", [\"logout-button\"], () => {\n            this.authManager.logout();\n            this.setupTopBar();\n        });\n        userProfile.appendChild(userIcon);\n        userProfile.appendChild(userName);\n        userProfile.onclick = () => {\n            window.router.navigateTo(\"me\");\n        };\n        userProfile.classList.add(\"flex-center\", \"user-profile\");\n        rightContainer.appendChild(userProfile);\n        rightContainer.appendChild(logoutButton);\n        rightContainer.style.display = \"none\";\n        this.topBar.appendChild(leftContainer);\n        this.topBar.appendChild(rightContainer);\n    }\n    setupFooter() {\n        if (this.footer.children.length > 0) {\n            return;\n        }\n        this.footer.classList.add(\"footer\", \"flex-center\");\n        const footerText1 = document.createElement(\"span\");\n        footerText1.textContent = \"© 2024 Spotipack\";\n        const footerText2Div = document.createElement(\"div\");\n        footerText2Div.classList.add(\"flex-center\", \"footer-text2\", \"link-flash\");\n        const footerText2 = document.createElement(\"span\");\n        footerText2.textContent = \"Made with   ❤️   by\";\n        const footerLink = document.createElement(\"a\");\n        footerLink.textContent = \"Kinan\";\n        footerLink.href = \"https://github.com/KinanLak/\";\n        footerLink.target = \"_blank\";\n        this.footer.appendChild(footerText1);\n        footerText2Div.appendChild(footerText2);\n        footerText2Div.appendChild(footerLink);\n        this.footer.appendChild(footerText2Div);\n    }\n}\n"],"names":["Button","HTMLButtonElement","constructor","id","text","classes","action","super","this","textContent","classList","add","addEventListener","customElements","define","extends","HomePage","authManager","spotify","buttonString","isAuthentified","connectToSpotify","document","createElement","className","handleButtonClick","particles","createParticles","render","homePage","content","title","appendChild","container","restoreTokens","error","console","window","router","navigateTo","handleSpotifyAuth","authenticate","num","i","particle","style","left","Math","random","top","animationDelay","Page","topBar","getElementById","setupTopBar","Error","footer","setupFooter","urlParams","URLSearchParams","location","search","has","showErrorMessage","get","hash","getLoggedUserInfos","then","rightContainer","children","display","setAttribute","loggedUser","pictureURL","toString","name","errorPopup","errorMessage","errorCloseButton","length","createTopbar","spotifyIconElement","src","alt","appName","leftContainer","userIcon","userName","userProfile","logoutButton","logout","onclick","footerText1","footerText2Div","footerText2","footerLink","href","target"],"sourceRoot":""}