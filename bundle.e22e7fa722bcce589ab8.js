"use strict";(self.webpackChunkspotipack=self.webpackChunkspotipack||[]).push([[431],{653:(t,e,s)=>{s.d(e,{A:()=>o});class n extends HTMLButtonElement{constructor(t,e,s,n){super(),this.id=t,this.textContent=e,this.classList.add(...s),this.addEventListener("click",n)}}customElements.define("custom-button",n,{extends:"button"});const o=n},431:(t,e,s)=>{s.r(e),s.d(e,{default:()=>o});var n=s(520);class o extends n.A{constructor(t,e){super(t,e)}async render(){super.render();let t=document.createElement("h1");t.classList.add("callback-page"),t.textContent="Redirection...",this.container.appendChild(t),await this.authManager.handleSpotifyCallback(),await this.spotify.getLoggedUserInfos()}}},520:(t,e,s)=>{s.d(e,{A:()=>a});var n=s(653),o=s(958);class a{constructor(t,e){if(this.authManager=t,this.spotify=e,this.topBar=document.getElementById("top-bar"),this.setupTopBar(),this.container=document.getElementById("app-container"),!this.container)throw new Error("L'élément app-container est introuvable dans le DOM");this.footer=document.getElementById("footer"),this.setupFooter()}async render(){const t=new URLSearchParams(window.location.search);t.has("error")&&this.showErrorMessage(t.get("error")),this.authManager.isAuthentified()&&"#home"!=window.location.hash&&"#callback"!=window.location.hash&&await this.spotify.getLoggedUserInfos().then((()=>{let t=this.topBar.children[1];t.style.display="flex",t.children[0].children[0].setAttribute("src",this.spotify.loggedUser?this.spotify.loggedUser.pictureURL.toString():""),t.children[0].children[1].textContent=this.spotify.loggedUser?this.spotify.loggedUser.name:"Unknown"}))}showErrorMessage(t){console.error("error",t);const e=document.createElement("div");e.classList.add("error-popup");const s=document.createElement("span");s.textContent="Nous avons rencontré un problème : "+t,e.style.display="flex",e.appendChild(s);const o=new n.A("error-close-button","Fermer",["error-close-button"],(()=>{e.style.display="none"}));o.classList.add("error-close-button"),e.appendChild(o),this.container.appendChild(e)}async setupTopBar(){if(0==this.topBar.children.length)this.createTopbar();else if(!this.authManager.isAuthentified()){this.topBar.children[1].style.display="none"}if(this.authManager.isAuthentified()){this.topBar.children[1].style.display="flex"}}createTopbar(){this.topBar.classList.add("top-bar");const t=document.createElement("img");t.src=o,t.alt="Spotify Icon",t.classList.add("spotify-icon");const e=document.createElement("span");e.textContent="Spotipack",e.classList.add("app-name");const s=document.createElement("div");s.classList.add("left-container"),s.appendChild(t),s.appendChild(e);const a=document.createElement("img");a.src=this.spotify.loggedUser?this.spotify.loggedUser.pictureURL.toString():"https://placekitten.com/200/200",a.alt="User Icon",a.classList.add("user-icon");const i=document.createElement("span");i.textContent=this.spotify.loggedUser?this.spotify.loggedUser.name:"Unknown",i.classList.add("user-name");const r=document.createElement("div");r.classList.add("right-container");const c=document.createElement("div");c.classList.add("user-profile");const d=new n.A("logout-button","Déconnecter",["logout-button"],(()=>{this.authManager.logout(),this.setupTopBar()}));c.appendChild(a),c.appendChild(i),c.onclick=()=>{window.router.navigateTo("me")},c.classList.add("flex-center","user-profile"),r.appendChild(c),r.appendChild(d),r.style.display="none",this.topBar.appendChild(s),this.topBar.appendChild(r)}setupFooter(){if(this.footer.children.length>0)return;this.footer.classList.add("footer","flex-center");const t=document.createElement("span");t.textContent="© 2024 Spotipack";const e=document.createElement("div");e.classList.add("flex-center","footer-text2","link-flash");const s=document.createElement("span");s.textContent="Made with   ❤️   by";const n=document.createElement("a");n.textContent="Kinan",n.href="https://github.com/KinanLak/",n.target="_blank",this.footer.appendChild(t),e.appendChild(s),e.appendChild(n),this.footer.appendChild(e)}}},958:(t,e,s)=>{t.exports=s.p+"75e30939df0b93a86b36.png"}}]);
//# sourceMappingURL=bundle.e22e7fa722bcce589ab8.js.map