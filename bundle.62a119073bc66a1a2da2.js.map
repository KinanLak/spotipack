{"version":3,"file":"bundle.62a119073bc66a1a2da2.js","mappings":"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","sources":["webpack:///./src/ts/components/Button.ts","webpack:///./src/ts/components/ArtistPill.ts","webpack:///./src/ts/components/TrackPill.ts","webpack:///./src/ts/pages/MePage.ts","webpack:///./src/ts/pages/Page.ts"],"sourcesContent":["class Button extends HTMLButtonElement {\n    constructor(id, text, classes, action) {\n        super();\n        this.id = id;\n        this.textContent = text;\n        this.classList.add(...classes);\n        this.addEventListener('click', action);\n    }\n}\ncustomElements.define('custom-button', Button, { extends: 'button' });\nexport default Button;\n","export class ArtistPill extends HTMLDivElement {\n    constructor(artist) {\n        super();\n        this.artist = artist;\n        this.classList.add(\"artist-pill\");\n        this.innerHTML = `\n        <img src=\"${artist.pictureURL}\" alt=\"Artist Image\" class=\"artist-image\">\n        <div id=\"artist-${artist.id}\" class=\"artist-name\">${artist.name}</div>\n        `;\n        this.addEventListener(\"click\", () => {\n            console.error(\"Navigating to artist\", artist.id);\n            window.router.navigateTo(\"artist\", { id: artist.id });\n        });\n    }\n}\ncustomElements.define(\"artist-pill\", ArtistPill, { extends: \"div\" });\nexport default ArtistPill;\n","export class TrackPill extends HTMLDivElement {\n    constructor(track) {\n        super();\n        this.track = track;\n        this.classList.add(\"track-pill\");\n        this.innerHTML = `\n        <img src=\"${track.imageURL}\" alt=\"Track Image\" class=\"track-image\">\n        <div id=\"track-${track.id}\" class=\"track-name\">${track.name}</div>\n        `;\n        this.addEventListener(\"click\", () => {\n            console.error(\"Navigating to track\", track.id);\n            window.router.navigateTo(\"track\", { id: track.id });\n        });\n    }\n}\ncustomElements.define(\"track-pill\", TrackPill, { extends: \"div\" });\nexport default TrackPill;\n","import Page from \"./Page\";\nimport { ArtistPill, TrackPill } from \"../components\";\nimport \"../../css/components/artistPill.scss\";\nimport \"../../css/components/trackPill.scss\";\nimport \"../../css/pages/me.scss\";\nexport default class MePage extends Page {\n    constructor(authManager, spotify) {\n        super(authManager, spotify);\n    }\n    async render() {\n        await super.render();\n        this.renderContent();\n    }\n    async renderContent() {\n        document.title = \"Me - Spotify Stats\";\n        let artistTitle = document.createElement(\"span\");\n        artistTitle.classList.add(\"artist-title\");\n        artistTitle.textContent = \"Vos artistes préférés\";\n        this.container.appendChild(artistTitle);\n        let userStats = document.createElement(\"div\");\n        userStats.id = \"user-artists\";\n        userStats.classList.add(\"user-artists\");\n        this.spotify.loggedUser?.topArtists.forEach((artist) => {\n            if (userStats) {\n                const artistPill = new ArtistPill(artist);\n                userStats.appendChild(artistPill);\n            }\n        });\n        this.container.appendChild(userStats);\n        let trackTitle = document.createElement(\"span\");\n        trackTitle.classList.add(\"track-title\");\n        trackTitle.textContent = \"Vos titres préférés\";\n        this.container.appendChild(trackTitle);\n        let userTracks = document.createElement(\"div\");\n        userTracks.id = \"user-tracks\";\n        userTracks.classList.add(\"user-tracks\");\n        this.spotify.loggedUser?.topTracks.forEach((track) => {\n            if (userTracks) {\n                const trackPill = new TrackPill(track);\n                userTracks.appendChild(trackPill);\n            }\n        });\n        this.container.appendChild(userTracks);\n    }\n}\n","import Button from \"../components/Button\";\nimport \"../../css/components/topbar.scss\";\nimport \"../../css/components/footer.scss\";\nimport spotifyIcon from \"../../images/spotify-icon.png\";\nexport default class Page {\n    constructor(authManager, spotify) {\n        this.authManager = authManager;\n        this.spotify = spotify;\n        this.topBar = document.getElementById(\"top-bar\");\n        this.setupTopBar();\n        this.container = document.getElementById(\"app-container\");\n        if (!this.container) {\n            throw new Error(\"L'élément app-container est introuvable dans le DOM\");\n        }\n        this.footer = document.getElementById(\"footer\");\n        this.setupFooter();\n    }\n    async render() {\n        //s'il y a un paramètre error\n        const urlParams = new URLSearchParams(window.location.search);\n        urlParams.has(\"error\") && this.showErrorMessage(urlParams.get(\"error\"));\n        if (this.authManager.isAuthentified() &&\n            window.location.hash != \"#home\" &&\n            window.location.hash != \"#callback\") {\n            await this.spotify.getLoggedUserInfos().then(() => {\n                let rightContainer = this.topBar.children[1];\n                rightContainer.style.display = \"flex\";\n                rightContainer.children[0].children[0].setAttribute(\"src\", this.spotify.loggedUser ? this.spotify.loggedUser.pictureURL.toString() : \"\");\n                rightContainer.children[0].children[1].textContent = this.spotify.loggedUser\n                    ? this.spotify.loggedUser.name\n                    : \"Unknown\";\n            });\n        }\n    }\n    showErrorMessage(error) {\n        console.error(\"error\", error);\n        const errorPopup = document.createElement(\"div\");\n        errorPopup.classList.add(\"error-popup\");\n        const errorMessage = document.createElement(\"span\");\n        errorMessage.textContent = \"Nous avons rencontré un problème : \" + error;\n        errorPopup.style.display = \"flex\";\n        errorPopup.appendChild(errorMessage);\n        const errorCloseButton = new Button(\"error-close-button\", \"Fermer\", [\"error-close-button\"], () => {\n            errorPopup.style.display = \"none\";\n        });\n        errorCloseButton.classList.add(\"error-close-button\");\n        errorPopup.appendChild(errorCloseButton);\n        this.container.appendChild(errorPopup);\n    }\n    async setupTopBar() {\n        if (this.topBar.children.length == 0) {\n            this.createTopbar();\n        }\n        else if (!this.authManager.isAuthentified()) {\n            let rightContainer = this.topBar.children[1];\n            rightContainer.style.display = \"none\";\n        }\n        if (this.authManager.isAuthentified()) {\n            let rightContainer = this.topBar.children[1];\n            rightContainer.style.display = \"flex\";\n        }\n    }\n    createTopbar() {\n        this.topBar.classList.add(\"top-bar\");\n        const spotifyIconElement = document.createElement(\"img\");\n        spotifyIconElement.src = spotifyIcon;\n        spotifyIconElement.alt = \"Spotify Icon\";\n        spotifyIconElement.classList.add(\"spotify-icon\");\n        const appName = document.createElement(\"span\");\n        appName.textContent = \"Spotipack\";\n        appName.classList.add(\"app-name\");\n        const leftContainer = document.createElement(\"div\");\n        leftContainer.classList.add(\"left-container\");\n        leftContainer.appendChild(spotifyIconElement);\n        leftContainer.appendChild(appName);\n        const userIcon = document.createElement(\"img\");\n        userIcon.src = this.spotify.loggedUser\n            ? this.spotify.loggedUser.pictureURL.toString()\n            : \"https://placekitten.com/200/200\";\n        userIcon.alt = \"User Icon\";\n        userIcon.classList.add(\"user-icon\");\n        const userName = document.createElement(\"span\");\n        userName.textContent = this.spotify.loggedUser ? this.spotify.loggedUser.name : \"Unknown\";\n        userName.classList.add(\"user-name\");\n        const rightContainer = document.createElement(\"div\");\n        rightContainer.classList.add(\"right-container\");\n        const userProfile = document.createElement(\"div\");\n        userProfile.classList.add(\"user-profile\");\n        const logoutButton = new Button(\"logout-button\", \"Déconnecter\", [\"logout-button\"], () => {\n            this.authManager.logout();\n            this.setupTopBar();\n        });\n        userProfile.appendChild(userIcon);\n        userProfile.appendChild(userName);\n        userProfile.onclick = () => {\n            window.router.navigateTo(\"me\");\n        };\n        userProfile.classList.add(\"flex-center\", \"user-profile\");\n        rightContainer.appendChild(userProfile);\n        rightContainer.appendChild(logoutButton);\n        rightContainer.style.display = \"none\";\n        this.topBar.appendChild(leftContainer);\n        this.topBar.appendChild(rightContainer);\n    }\n    setupFooter() {\n        if (this.footer.children.length > 0) {\n            return;\n        }\n        this.footer.classList.add(\"footer\", \"flex-center\");\n        const footerText1 = document.createElement(\"span\");\n        footerText1.textContent = \"© 2024 Spotipack\";\n        const footerText2Div = document.createElement(\"div\");\n        footerText2Div.classList.add(\"flex-center\", \"footer-text2\", \"link-flash\");\n        const footerText2 = document.createElement(\"span\");\n        footerText2.textContent = \"Made with   ❤️   by\";\n        const footerLink = document.createElement(\"a\");\n        footerLink.textContent = \"Kinan\";\n        footerLink.href = \"https://github.com/KinanLak/\";\n        footerLink.target = \"_blank\";\n        this.footer.appendChild(footerText1);\n        footerText2Div.appendChild(footerText2);\n        footerText2Div.appendChild(footerLink);\n        this.footer.appendChild(footerText2Div);\n    }\n}\n"],"names":["Button","HTMLButtonElement","constructor","id","text","classes","action","super","this","textContent","classList","add","addEventListener","customElements","define","extends","ArtistPill","HTMLDivElement","artist","innerHTML","pictureURL","name","console","error","window","router","navigateTo","TrackPill","track","imageURL","MePage","authManager","spotify","render","renderContent","document","title","artistTitle","createElement","container","appendChild","userStats","loggedUser","topArtists","forEach","artistPill","trackTitle","userTracks","topTracks","trackPill","Page","topBar","getElementById","setupTopBar","Error","footer","setupFooter","urlParams","URLSearchParams","location","search","has","showErrorMessage","get","isAuthentified","hash","getLoggedUserInfos","then","rightContainer","children","style","display","setAttribute","toString","errorPopup","errorMessage","errorCloseButton","length","createTopbar","spotifyIconElement","src","alt","appName","leftContainer","userIcon","userName","userProfile","logoutButton","logout","onclick","footerText1","footerText2Div","footerText2","footerLink","href","target"],"sourceRoot":""}