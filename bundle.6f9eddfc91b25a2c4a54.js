"use strict";(self.webpackChunkspotipack=self.webpackChunkspotipack||[]).push([[895],{653:(t,e,s)=>{s.d(e,{A:()=>a});class i extends HTMLButtonElement{constructor(t,e,s,i){super(),this.id=t,this.textContent=e,this.classList.add(...s),this.addEventListener("click",i)}}customElements.define("custom-button",i,{extends:"button"});const a=i},928:(t,e,s)=>{s.d(e,{h:()=>i,Z:()=>a});class i extends HTMLDivElement{constructor(t){super(),this.artist=t,this.classList.add("artist-pill"),this.innerHTML=`\n        <img src="${t.pictureURL}" alt="Artist Image" class="artist-image">\n        <div id="artist-${t.id}" class="artist-name">${t.name}</div>\n        `,this.addEventListener("click",(()=>{console.error("Navigating to artist",t.id),window.router.navigateTo("artist",{id:t.id})}))}}customElements.define("artist-pill",i,{extends:"div"});class a extends HTMLDivElement{constructor(t){super(),this.track=t,this.classList.add("track-pill"),this.innerHTML=`\n        <img src="${t.imageURL}" alt="Track Image" class="track-image">\n        <div id="track-${t.id}" class="track-name">${t.name}</div>\n        `,this.addEventListener("click",(()=>{console.error("Navigating to track",t.id),window.router.navigateTo("track",{id:t.id})}))}}customElements.define("track-pill",a,{extends:"div"});s(653)},895:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});var i=s(520),a=s(928),n=s(958);class r extends i.A{constructor(t,e,s){super(t,e),this.topTracks=[],s?this.spotify.getArtistInfos(s).then((t=>{this.artist=t})):(console.error("No artist ID provided"),this.artist=void 0)}async render(){await super.render(),console.log("Rendering artist page"),this.artist?(this.topTracks=await this.spotify.getArtistTopTracks(this.artist.id),this.renderContent()):window.router.navigateTo("me")}async renderContent(){if(!this.artist)return;document.title=this.artist.name+" - Spotipack";let t=document.createElement("div");t.id="artist-page",t.classList.add("artist-page");let e=document.createElement("div");e.id="artist-infos",e.classList.add("page-artist-infos");let s=document.createElement("div");s.id="artist-title-div",s.classList.add("page-artist-title-div"),s.addEventListener("click",(()=>{window.open(this.artist.artistURL.toString(),"_blank")}));let i=document.createElement("span");i.classList.add("page-artist-title"),i.textContent=this.artist.name;let r=document.createElement("img");r.src=n,r.alt="Spotify",r.classList.add("page-artist-spotify-icon"),s.appendChild(r),s.appendChild(i);let o=document.createElement("img");o.src=this.artist.pictureURL.toString(),o.alt=this.artist.name,e.appendChild(o),e.appendChild(s);let d=document.createElement("div");d.id="artist-stats",d.classList.add("page-artist-stats");let c=document.createElement("span");c.classList.add("page-artist-genres"),c.textContent=this.artist.genres.join("  -  ");let l=document.createElement("span");l.classList.add("page-artist-followers"),l.textContent=this.artist.followers+" followers",d.appendChild(l);let p=document.createElement("span");p.classList.add("page-artist-popularity"),p.textContent="Popularité: "+this.artist.popularity,t.appendChild(e),d.appendChild(p),t.appendChild(d),t.appendChild(c);let h=document.createElement("span");h.classList.add("page-artist-title-top-tracks"),h.textContent="Musiques les plus écoutés",t.appendChild(h);let u=document.createElement("div");u.id="page-artist-top-tracks",u.classList.add("page-artist-top-tracks"),this.topTracks.forEach((t=>{if(u){const e=new a.Z(t);u.appendChild(e)}})),this.container.appendChild(t),t.appendChild(u)}}},520:(t,e,s)=>{s.d(e,{A:()=>n});var i=s(653),a=s(958);class n{constructor(t,e){if(this.authManager=t,this.spotify=e,this.topBar=document.getElementById("top-bar"),this.setupTopBar(),this.container=document.getElementById("app-container"),!this.container)throw new Error("L'élément app-container est introuvable dans le DOM");this.footer=document.getElementById("footer"),this.setupFooter()}async render(){const t=new URLSearchParams(window.location.search);t.has("error")&&this.showErrorMessage(t.get("error")),this.authManager.isAuthentified()&&"#home"!=window.location.hash&&"#callback"!=window.location.hash&&await this.spotify.getLoggedUserInfos().then((()=>{let t=this.topBar.children[1];t.style.display="flex",t.children[0].children[0].setAttribute("src",this.spotify.loggedUser?this.spotify.loggedUser.pictureURL.toString():""),t.children[0].children[1].textContent=this.spotify.loggedUser?this.spotify.loggedUser.name:"Unknown"}))}showErrorMessage(t){console.error("error",t);const e=document.createElement("div");e.classList.add("error-popup");const s=document.createElement("span");s.textContent="Nous avons rencontré un problème : "+t,e.style.display="flex",e.appendChild(s);const a=new i.A("error-close-button","Fermer",["error-close-button"],(()=>{e.style.display="none"}));a.classList.add("error-close-button"),e.appendChild(a),this.container.appendChild(e)}async setupTopBar(){if(0==this.topBar.children.length)this.createTopbar();else if(!this.authManager.isAuthentified()){this.topBar.children[1].style.display="none"}if(this.authManager.isAuthentified()){this.topBar.children[1].style.display="flex"}}createTopbar(){this.topBar.classList.add("top-bar");const t=document.createElement("img");t.src=a,t.alt="Spotify Icon",t.classList.add("spotify-icon");const e=document.createElement("span");e.textContent="Spotipack",e.classList.add("app-name");const s=document.createElement("div");s.classList.add("left-container"),s.appendChild(t),s.appendChild(e);const n=document.createElement("img");n.src=this.spotify.loggedUser?this.spotify.loggedUser.pictureURL.toString():"https://placekitten.com/200/200",n.alt="User Icon",n.classList.add("user-icon");const r=document.createElement("span");r.textContent=this.spotify.loggedUser?this.spotify.loggedUser.name:"Unknown",r.classList.add("user-name");const o=document.createElement("div");o.classList.add("right-container");const d=document.createElement("div");d.classList.add("user-profile");const c=new i.A("logout-button","Déconnecter",["logout-button"],(()=>{this.authManager.logout(),this.setupTopBar()}));d.appendChild(n),d.appendChild(r),d.onclick=()=>{window.router.navigateTo("me")},d.classList.add("flex-center","user-profile"),o.appendChild(d),o.appendChild(c),o.style.display="none",this.topBar.appendChild(s),this.topBar.appendChild(o)}setupFooter(){if(this.footer.children.length>0)return;this.footer.classList.add("footer","flex-center");const t=document.createElement("span");t.textContent="© 2024 Spotipack";const e=document.createElement("div");e.classList.add("flex-center","footer-text2","link-flash");const s=document.createElement("span");s.textContent="Made with   ❤️   by";const i=document.createElement("a");i.textContent="Kinan",i.href="https://github.com/KinanLak/",i.target="_blank",this.footer.appendChild(t),e.appendChild(s),e.appendChild(i),this.footer.appendChild(e)}}},958:(t,e,s)=>{t.exports=s.p+"75e30939df0b93a86b36.png"}}]);
//# sourceMappingURL=bundle.6f9eddfc91b25a2c4a54.js.map