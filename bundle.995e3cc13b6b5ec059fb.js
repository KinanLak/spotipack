"use strict";(self.webpackChunkspotipack=self.webpackChunkspotipack||[]).push([[851],{653:(t,e,s)=>{s.d(e,{A:()=>a});class n extends HTMLButtonElement{constructor(t,e,s,n){super(),this.id=t,this.textContent=e,this.classList.add(...s),this.addEventListener("click",n)}}customElements.define("custom-button",n,{extends:"button"});const a=n},928:(t,e,s)=>{s.d(e,{h:()=>n,Z:()=>a});class n extends HTMLDivElement{constructor(t){super(),this.artist=t,this.classList.add("artist-pill"),this.innerHTML=`\n        <img src="${t.pictureURL}" alt="Artist Image" class="artist-image">\n        <div id="artist-${t.id}" class="artist-name">${t.name}</div>\n        `,this.addEventListener("click",(()=>{console.error("Navigating to artist",t.id),window.router.navigateTo("artist",{id:t.id})}))}}customElements.define("artist-pill",n,{extends:"div"});class a extends HTMLDivElement{constructor(t){super(),this.track=t,this.classList.add("track-pill"),this.innerHTML=`\n        <img src="${t.imageURL}" alt="Track Image" class="track-image">\n        <div id="track-${t.id}" class="track-name">${t.name}</div>\n        `,this.addEventListener("click",(()=>{console.error("Navigating to track",t.id),window.router.navigateTo("track",{id:t.id})}))}}customElements.define("track-pill",a,{extends:"div"});s(653)},520:(t,e,s)=>{s.d(e,{A:()=>i});var n=s(653),a=s(958);class i{constructor(t,e){if(this.authManager=t,this.spotify=e,this.topBar=document.getElementById("top-bar"),this.setupTopBar(),this.container=document.getElementById("app-container"),!this.container)throw new Error("L'élément app-container est introuvable dans le DOM");this.footer=document.getElementById("footer"),this.setupFooter()}async render(){const t=new URLSearchParams(window.location.search);t.has("error")&&this.showErrorMessage(t.get("error")),this.authManager.isAuthentified()&&"#home"!=window.location.hash&&"#callback"!=window.location.hash&&await this.spotify.getLoggedUserInfos().then((()=>{let t=this.topBar.children[1];t.style.display="flex",t.children[0].children[0].setAttribute("src",this.spotify.loggedUser?this.spotify.loggedUser.pictureURL.toString():""),t.children[0].children[1].textContent=this.spotify.loggedUser?this.spotify.loggedUser.name:"Unknown"}))}showErrorMessage(t){console.error("error",t);const e=document.createElement("div");e.classList.add("error-popup");const s=document.createElement("span");s.textContent="Nous avons rencontré un problème : "+t,e.style.display="flex",e.appendChild(s);const a=new n.A("error-close-button","Fermer",["error-close-button"],(()=>{e.style.display="none"}));a.classList.add("error-close-button"),e.appendChild(a),this.container.appendChild(e)}async setupTopBar(){if(0==this.topBar.children.length)this.createTopbar();else if(!this.authManager.isAuthentified()){this.topBar.children[1].style.display="none"}if(this.authManager.isAuthentified()){this.topBar.children[1].style.display="flex"}}createTopbar(){this.topBar.classList.add("top-bar");const t=document.createElement("img");t.src=a,t.alt="Spotify Icon",t.classList.add("spotify-icon");const e=document.createElement("span");e.textContent="Spotipack",e.classList.add("app-name");const s=document.createElement("div");s.classList.add("left-container"),s.appendChild(t),s.appendChild(e);const i=document.createElement("img");i.src=this.spotify.loggedUser?this.spotify.loggedUser.pictureURL.toString():"https://placekitten.com/200/200",i.alt="User Icon",i.classList.add("user-icon");const r=document.createElement("span");r.textContent=this.spotify.loggedUser?this.spotify.loggedUser.name:"Unknown",r.classList.add("user-name");const o=document.createElement("div");o.classList.add("right-container");const d=document.createElement("div");d.classList.add("user-profile");const c=new n.A("logout-button","Déconnecter",["logout-button"],(()=>{this.authManager.logout(),this.setupTopBar()}));d.appendChild(i),d.appendChild(r),d.onclick=()=>{window.router.navigateTo("me")},d.classList.add("flex-center","user-profile"),o.appendChild(d),o.appendChild(c),o.style.display="none",this.topBar.appendChild(s),this.topBar.appendChild(o)}setupFooter(){if(this.footer.children.length>0)return;this.footer.classList.add("footer","flex-center");const t=document.createElement("span");t.textContent="© 2024 Spotipack";const e=document.createElement("div");e.classList.add("flex-center","footer-text2","link-flash");const s=document.createElement("span");s.textContent="Made with   ❤️   by";const n=document.createElement("a");n.textContent="Kinan",n.href="https://github.com/KinanLak/",n.target="_blank",this.footer.appendChild(t),e.appendChild(s),e.appendChild(n),this.footer.appendChild(e)}}},851:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});var n=s(520),a=s(928),i=s(958);class r extends n.A{constructor(t,e,s){super(t,e),s?this.spotify.getTrackInfos(s).then((t=>{this.track=t})):(console.error("No track ID provided"),this.track=void 0)}async render(){await super.render(),console.log("Rendering track page"),this.track?this.renderContent():window.router.navigateTo("me")}renderContent(){if(!this.track)return;document.title=this.track.name+" - Spotipack";let t=document.createElement("div");t.id="track-page",t.classList.add("track-page");let e=document.createElement("div");e.id="track-infos",e.classList.add("page-track-infos");let s=document.createElement("div");s.id="track-title-div",s.classList.add("page-track-title-div"),s.addEventListener("click",(()=>{window.open(this.track.trackURL.toString(),"_blank")}));let n=document.createElement("span");n.classList.add("page-track-title"),n.textContent=this.track.name;let r=document.createElement("img");r.src=i,r.alt="Spotify",r.classList.add("page-track-spotify-icon"),s.appendChild(r),s.appendChild(n);let o=document.createElement("img");o.src=this.track.imageURL.toString(),o.alt=this.track.name,e.appendChild(o),e.appendChild(s);let d=document.createElement("div");d.id="track-stats",d.classList.add("page-track-stats");let c=document.createElement("div");c.classList.add("page-track-artists"),this.track.artists.forEach((t=>{this.spotify.getArtistInfos(t.id).then((t=>{let e=new a.h(t);c.appendChild(e)}))}));let l=document.createElement("span");l.classList.add("page-track-duration"),l.textContent="Durée: "+Math.floor(this.track.duration/1e3/60)+"min"+Math.floor(this.track.duration/1e3)%60;let p=document.createElement("span");p.classList.add("page-track-popularity"),p.textContent="Popularité: "+this.track.popularity,t.appendChild(e),d.appendChild(l),d.appendChild(p),t.appendChild(d),this.container.appendChild(t),this.container.appendChild(c)}}},958:(t,e,s)=>{t.exports=s.p+"75e30939df0b93a86b36.png"}}]);
//# sourceMappingURL=bundle.995e3cc13b6b5ec059fb.js.map